# EduCanvas v2 ìˆ˜ê°• ë“±ë¡ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ì„¤ê³„ ê°œìš”

**ì„¤ê³„ ì¼ì**: 2025-08-25  
**ì„¤ê³„ ë²„ì „**: v2.0 Enrollment  
**ì„¤ê³„ ë²”ìœ„**: ìˆ˜ê°• ë“±ë¡ ë° ê²°ì œ ì‹œìŠ¤í…œ ì „ì²´ ë¦¬ë‰´ì–¼  
**í•µì‹¬ ì² í•™**: "3ë‹¨ê³„ë¡œ ì™„ë£Œí•˜ëŠ” ê°„í¸í•œ ìˆ˜ê°• ë“±ë¡"

## ğŸ¯ ì„¤ê³„ ëª©í‘œ

### í•µì‹¬ ëª©í‘œ
1. **ë‹¨ìˆœí•œ ì›Œí¬í”Œë¡œìš°**: í•™ìƒ ì„ íƒ â†’ ìˆ˜ê°• ì„ íƒ â†’ ê²°ì œ ì™„ë£Œ
2. **ìë™í™” ê·¹ëŒ€í™”**: í• ì¸ ìë™ ì ìš©, ì‹œê°„í‘œ ìë™ ë°°ì •
3. **ì‹¤ì‹œê°„ ê²€ì¦**: ì •ì›, ì‹œê°„ ì¶©ëŒ ì¦‰ì‹œ í™•ì¸
4. **ìœ ì—°í•œ íŒ¨í‚¤ì§€**: ë‹¤ì–‘í•œ ìˆ˜ê°• ì¡°í•© ì§€ì›

## ğŸ—ï¸ ì›Œí¬í”Œë¡œìš° ì„¤ê³„

### ì „ì²´ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ìˆ˜ê°• ë“±ë¡ ì›Œí¬í”Œë¡œìš°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [Step 1: í•™ìƒ ì„ íƒ]                                             â”‚
â”‚     â†“                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ ğŸ” í•™ìƒ ê²€ìƒ‰  â”‚ â†’ ê¸°ì¡´ í•™ìƒ or ì‹ ê·œ í•™ìƒ ë“±ë¡               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚     â†“                                                            â”‚
â”‚  [Step 2: ìˆ˜ê°• êµ¬ì„±]                                             â”‚
â”‚     â†“                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ ğŸ“š ê³¼ëª© ì„ íƒ â†’ ğŸ“… ì‹œê°„í‘œ ë°°ì • â†’ ğŸ’° íŒ¨í‚¤ì§€ êµ¬ì„±            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚     â†“                                                            â”‚
â”‚  [Step 3: ê²°ì œ ì²˜ë¦¬]                                             â”‚
â”‚     â†“                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ ğŸ’³ ê²°ì œ ë°©ë²•  â”‚ â†’ í• ì¸ ì ìš© â†’ ê²°ì œ ì™„ë£Œ                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ë ˆì´ì•„ì›ƒ êµ¬ì¡°

### ë©”ì¸ ë ˆì´ì•„ì›ƒ (3-Panel Split View)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: ìˆ˜ê°• ë“±ë¡ > Step Indicator [1 í•™ìƒ] [2 ìˆ˜ê°•] [3 ê²°ì œ]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚               â”‚                           â”‚                       â”‚
â”‚ ì™¼ìª½ íŒ¨ë„      â”‚ ì¤‘ì•™ íŒ¨ë„                 â”‚ ì˜¤ë¥¸ìª½ íŒ¨ë„          â”‚
â”‚ (í•™ìƒ ê²€ìƒ‰)    â”‚ (ìˆ˜ê°• êµ¬ì„±)              â”‚ (ìš”ì•½ ë° ê²°ì œ)       â”‚
â”‚               â”‚                           â”‚                       â”‚
â”‚ [ê²€ìƒ‰ì°½]      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚               â”‚ â”‚ ê³¼ëª© ì¹´ë“œ ê·¸ë¦¬ë“œ      â”‚ â”‚ â”‚ ì„ íƒëœ í•™ìƒ     â”‚ â”‚
â”‚ ìµœê·¼ ë“±ë¡     â”‚ â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ â”‚ â”‚ í™ê¸¸ë™          â”‚ â”‚
â”‚ â€¢ ê¹€ì² ìˆ˜      â”‚ â”‚ â”‚ìˆ˜í•™â”‚ â”‚ì˜ì–´â”‚       â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â€¢ ì´ì˜í¬      â”‚ â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚ â”‚                     â”‚
â”‚               â”‚ â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”       â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ì „ì²´ í•™ìƒ     â”‚ â”‚ â”‚ë¬¼ë¦¬â”‚ â”‚í™”í•™â”‚       â”‚ â”‚ â”‚ ì„ íƒëœ ìˆ˜ê°•     â”‚ â”‚
â”‚ â€¢ í™ê¸¸ë™ âœ“    â”‚ â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜       â”‚ â”‚ â”‚ â€¢ ìˆ˜í•™ (ì›”ìˆ˜ê¸ˆ) â”‚ â”‚
â”‚ â€¢ ë°•ë¯¼ìˆ˜      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â€¢ ì˜ì–´ (í™”ëª©)   â”‚ â”‚
â”‚ â€¢ ...         â”‚                           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                     â”‚
â”‚ [ì‹ ê·œë“±ë¡]    â”‚ â”‚ ì‹œê°„í‘œ ë¯¸ë¦¬ë³´ê¸°      â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚               â”‚ â”‚ (ë“œë˜ê·¸ì•¤ë“œë¡­)       â”‚ â”‚ â”‚ ê²°ì œ ì •ë³´       â”‚ â”‚
â”‚               â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ ìˆ˜ê°•ë£Œ: 500,000 â”‚ â”‚
â”‚               â”‚                           â”‚ â”‚ í• ì¸: -50,000   â”‚ â”‚
â”‚               â”‚                           â”‚ â”‚ í•©ê³„: 450,000   â”‚ â”‚
â”‚               â”‚                           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚                           â”‚                     â”‚
â”‚               â”‚                           â”‚ [ê²°ì œ ì§„í–‰]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ´ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 1. í•™ìƒ ì„ íƒ íŒ¨ë„ (Step 1)

```tsx
interface StudentSelectionPanel {
  // ê²€ìƒ‰ ê¸°ëŠ¥
  search: {
    query: string
    filters: {
      status: 'all' | 'active' | 'inactive'
      grade?: string
      school?: string
    }
    results: Student[]
  }
  
  // ë¹ ë¥¸ ì„ íƒ
  quickSelect: {
    recentStudents: Student[]      // ìµœê·¼ ë“±ë¡í•œ í•™ìƒ
    siblings: Student[]            // í˜•ì œìë§¤ (í• ì¸ ëŒ€ìƒ)
    waitingList: Student[]         // ëŒ€ê¸° ì¤‘ì¸ í•™ìƒ
  }
  
  // ì•¡ì…˜
  actions: {
    onSelectStudent: (student: Student) => void
    onCreateNewStudent: () => void
    onSelectMultiple: (students: Student[]) => void  // í˜•ì œ ë™ì‹œ ë“±ë¡
  }
  
  // UI ìš”ì†Œ
  display: {
    showPhoto: true
    showContactInfo: true
    highlightSiblings: true        // í˜•ì œ ê´€ê³„ í‘œì‹œ
    showCurrentEnrollments: true   // í˜„ì¬ ìˆ˜ê°• ì¤‘ì¸ ê³¼ëª©
  }
}
```

### 2. ìˆ˜ê°• êµ¬ì„± íŒ¨ë„ (Step 2)

```tsx
interface CourseConfigurationPanel {
  // ê³¼ëª© ì„ íƒ
  courseSelection: {
    availableCourses: Course[]
    selectedCourses: Course[]
    
    // ê³¼ëª© ì¹´ë“œ ì •ë³´
    courseCard: {
      name: string
      instructor: string
      schedule: string
      capacity: { current: number; max: number }
      price: number
      description: string
    }
    
    // í•„í„°ë§
    filters: {
      subject?: string
      instructor?: string
      dayOfWeek?: string[]
      timeSlot?: string
      level?: string
    }
  }
  
  // ì‹œê°„í‘œ ë°°ì •
  scheduleAssignment: {
    type: 'automatic' | 'manual'
    
    // ìë™ ë°°ì •
    automatic: {
      preferences: {
        preferredDays: string[]
        preferredTimes: string[]
        avoidDays: string[]
      }
      conflicts: ConflictInfo[]
      suggestions: ScheduleSuggestion[]
    }
    
    // ìˆ˜ë™ ë°°ì • (ë“œë˜ê·¸ì•¤ë“œë¡­)
    manual: {
      weekView: WeekSchedule
      availableSlots: TimeSlot[]
      draggedClass: Class | null
    }
  }
  
  // íŒ¨í‚¤ì§€ êµ¬ì„±
  packageBuilder: {
    templates: PackageTemplate[]    // ì¸ê¸° íŒ¨í‚¤ì§€
    customPackage: {
      courses: Course[]
      duration: number              // ê°œì›”
      sessionsPerWeek: number
      totalSessions: number
    }
    
    pricing: {
      basePrice: number
      discounts: Discount[]
      finalPrice: number
    }
  }
}
```

### 3. ê²°ì œ ì²˜ë¦¬ íŒ¨ë„ (Step 3)

```tsx
interface PaymentProcessPanel {
  // ê²°ì œ ìš”ì•½
  summary: {
    student: Student
    enrollments: Enrollment[]
    
    pricing: {
      subtotal: number
      discounts: {
        sibling?: number           // í˜•ì œ í• ì¸
        earlyBird?: number        // ì¡°ê¸° ë“±ë¡ í• ì¸
        package?: number          // íŒ¨í‚¤ì§€ í• ì¸
        loyalty?: number          // ì¥ê¸° ìˆ˜ê°• í• ì¸
        referral?: number         // ì¶”ì²œ í• ì¸
      }
      tax?: number
      total: number
    }
    
    schedule: {
      startDate: Date
      endDate: Date
      totalSessions: number
      weeklyHours: number
    }
  }
  
  // ê²°ì œ ë°©ë²•
  paymentMethod: {
    type: 'card' | 'bank' | 'cash' | 'installment'
    
    // ì¹´ë“œ ê²°ì œ
    card: {
      number: string
      holder: string
      expiry: string
      cvc: string
    }
    
    // ê³„ì¢Œ ì´ì²´
    bank: {
      accountNumber: string
      bankName: string
      depositor: string
    }
    
    // í• ë¶€
    installment: {
      months: 2 | 3 | 6 | 12
      monthlyAmount: number
      firstPayment: Date
    }
  }
  
  // ì˜ìˆ˜ì¦ ì˜µì…˜
  receipt: {
    type: 'email' | 'print' | 'both'
    taxInvoice: boolean
    recipient: string
  }
}
```

## ğŸ¨ ìƒì„¸ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### Step Indicator ì»´í¬ë„ŒíŠ¸

```tsx
const EnrollmentStepIndicator = ({ currentStep, completedSteps }) => {
  const steps = [
    { id: 1, label: 'í•™ìƒ ì„ íƒ', icon: User },
    { id: 2, label: 'ìˆ˜ê°• êµ¬ì„±', icon: BookOpen },
    { id: 3, label: 'ê²°ì œ ì²˜ë¦¬', icon: CreditCard }
  ]
  
  return (
    <div className="flex items-center justify-center py-4">
      {steps.map((step, index) => (
        <React.Fragment key={step.id}>
          <StepItem
            number={step.id}
            label={step.label}
            icon={step.icon}
            status={
              completedSteps.includes(step.id) ? 'completed' :
              currentStep === step.id ? 'active' : 'pending'
            }
          />
          {index < steps.length - 1 && (
            <StepConnector 
              completed={completedSteps.includes(step.id)}
            />
          )}
        </React.Fragment>
      ))}
    </div>
  )
}
```

### ê³¼ëª© ì¹´ë“œ ì»´í¬ë„ŒíŠ¸

```tsx
const CourseCard = memo(({ 
  course, 
  selected, 
  onSelect, 
  disabled 
}: CourseCardProps) => {
  const capacityPercentage = (course.enrolled / course.capacity) * 100
  const isAlmostFull = capacityPercentage >= 80
  const isFull = capacityPercentage >= 100
  
  return (
    <Card
      className={cn(
        "course-card cursor-pointer transition-all",
        "hover:shadow-lg hover:scale-105",
        selected && "ring-2 ring-blue-500 bg-blue-50",
        disabled && "opacity-50 cursor-not-allowed",
        isFull && "bg-gray-50"
      )}
      onClick={() => !disabled && !isFull && onSelect(course)}
    >
      <CardHeader className="pb-3">
        <div className="flex items-start justify-between">
          <div>
            <CardTitle className="text-lg font-semibold">
              {course.name}
            </CardTitle>
            <p className="text-sm text-gray-600 mt-1">
              {course.instructor}
            </p>
          </div>
          {selected && (
            <CheckCircle className="h-5 w-5 text-blue-500" />
          )}
        </div>
      </CardHeader>
      
      <CardContent className="space-y-3">
        {/* ì‹œê°„í‘œ ì •ë³´ */}
        <div className="flex items-center gap-2 text-sm">
          <Calendar className="h-4 w-4 text-gray-400" />
          <span>{course.schedule}</span>
        </div>
        
        {/* ì •ì› ìƒíƒœ */}
        <div className="space-y-1">
          <div className="flex items-center justify-between text-sm">
            <span className="text-gray-600">ì •ì›</span>
            <span className={cn(
              "font-medium",
              isFull && "text-red-600",
              isAlmostFull && "text-yellow-600"
            )}>
              {course.enrolled}/{course.capacity}ëª…
            </span>
          </div>
          <Progress 
            value={capacityPercentage} 
            className={cn(
              "h-2",
              isFull && "bg-red-100",
              isAlmostFull && "bg-yellow-100"
            )}
          />
        </div>
        
        {/* ìˆ˜ê°•ë£Œ */}
        <div className="flex items-center justify-between">
          <span className="text-sm text-gray-600">ìˆ˜ê°•ë£Œ</span>
          <span className="font-semibold text-lg">
            {formatCurrency(course.price)}
          </span>
        </div>
        
        {/* íƒœê·¸ */}
        <div className="flex flex-wrap gap-1">
          {course.tags?.map(tag => (
            <Badge key={tag} variant="secondary" className="text-xs">
              {tag}
            </Badge>
          ))}
        </div>
      </CardContent>
    </Card>
  )
})
```

### ì‹œê°„í‘œ ë¯¸ë¦¬ë³´ê¸° ì»´í¬ë„ŒíŠ¸

```tsx
const SchedulePreview = ({ 
  studentId, 
  selectedCourses, 
  existingSchedule 
}) => {
  const [viewMode, setViewMode] = useState<'week' | 'month'>('week')
  const [conflicts, setConflicts] = useState<Conflict[]>([])
  
  // ì¶©ëŒ ê°ì§€
  useEffect(() => {
    const detected = detectConflicts([
      ...existingSchedule,
      ...selectedCourses
    ])
    setConflicts(detected)
  }, [selectedCourses, existingSchedule])
  
  return (
    <div className="schedule-preview border rounded-lg p-4">
      <div className="flex items-center justify-between mb-4">
        <h3 className="font-semibold">ì‹œê°„í‘œ ë¯¸ë¦¬ë³´ê¸°</h3>
        <ToggleGroup value={viewMode} onValueChange={setViewMode}>
          <ToggleGroupItem value="week">ì£¼ê°„</ToggleGroupItem>
          <ToggleGroupItem value="month">ì›”ê°„</ToggleGroupItem>
        </ToggleGroup>
      </div>
      
      {conflicts.length > 0 && (
        <Alert variant="warning" className="mb-4">
          <AlertCircle className="h-4 w-4" />
          <AlertDescription>
            ì‹œê°„ ì¶©ëŒì´ {conflicts.length}ê±´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.
            ë‹¤ë¥¸ ì‹œê°„ëŒ€ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ê¸°ì¡´ ìˆ˜ì—…ì„ ì¡°ì •í•´ì£¼ì„¸ìš”.
          </AlertDescription>
        </Alert>
      )}
      
      <div className="schedule-grid">
        {viewMode === 'week' ? (
          <WeekScheduleGrid
            schedule={[...existingSchedule, ...selectedCourses]}
            conflicts={conflicts}
            interactive={true}
            onSlotClick={(slot) => handleSlotClick(slot)}
          />
        ) : (
          <MonthCalendar
            schedule={[...existingSchedule, ...selectedCourses]}
            highlights={selectedCourses.map(c => c.startDate)}
          />
        )}
      </div>
    </div>
  )
}
```

### í• ì¸ ìë™ ì ìš© ì»´í¬ë„ŒíŠ¸

```tsx
const DiscountCalculator = ({ 
  student, 
  enrollments, 
  basePrice 
}) => {
  const [appliedDiscounts, setAppliedDiscounts] = useState<Discount[]>([])
  const [finalPrice, setFinalPrice] = useState(basePrice)
  
  // ìë™ í• ì¸ ê³„ì‚°
  useEffect(() => {
    const discounts = []
    
    // í˜•ì œ í• ì¸ ì²´í¬
    if (student.siblings?.length > 0) {
      const enrolledSiblings = student.siblings.filter(s => 
        s.enrollmentStatus === 'active'
      )
      if (enrolledSiblings.length > 0) {
        discounts.push({
          type: 'sibling',
          label: 'í˜•ì œ í• ì¸',
          amount: basePrice * 0.1,  // 10% í• ì¸
          description: `${enrolledSiblings[0].name} í˜•ì œ`
        })
      }
    }
    
    // ì¡°ê¸° ë“±ë¡ í• ì¸
    const daysUntilStart = differenceInDays(
      enrollments[0].startDate,
      new Date()
    )
    if (daysUntilStart >= 30) {
      discounts.push({
        type: 'earlyBird',
        label: 'ì¡°ê¸° ë“±ë¡ í• ì¸',
        amount: basePrice * 0.05,  // 5% í• ì¸
        description: '30ì¼ ì „ ë“±ë¡'
      })
    }
    
    // íŒ¨í‚¤ì§€ í• ì¸
    if (enrollments.length >= 3) {
      discounts.push({
        type: 'package',
        label: 'íŒ¨í‚¤ì§€ í• ì¸',
        amount: basePrice * 0.15,  // 15% í• ì¸
        description: `${enrollments.length}ê³¼ëª© ë™ì‹œ ìˆ˜ê°•`
      })
    }
    
    // ì¥ê¸° ìˆ˜ê°• í• ì¸
    if (student.totalMonthsEnrolled >= 12) {
      discounts.push({
        type: 'loyalty',
        label: 'ì¥ê¸° ìˆ˜ê°• í• ì¸',
        amount: basePrice * 0.1,  // 10% í• ì¸
        description: `${student.totalMonthsEnrolled}ê°œì›” ìˆ˜ê°•`
      })
    }
    
    setAppliedDiscounts(discounts)
    
    const totalDiscount = discounts.reduce((sum, d) => sum + d.amount, 0)
    setFinalPrice(Math.max(basePrice - totalDiscount, 0))
  }, [student, enrollments, basePrice])
  
  return (
    <div className="discount-calculator space-y-3">
      <div className="flex justify-between font-medium">
        <span>ê¸°ë³¸ ìˆ˜ê°•ë£Œ</span>
        <span>{formatCurrency(basePrice)}</span>
      </div>
      
      {appliedDiscounts.length > 0 && (
        <>
          <Separator />
          <div className="space-y-2">
            {appliedDiscounts.map(discount => (
              <div key={discount.type} className="flex justify-between text-sm">
                <div className="flex items-center gap-2">
                  <Badge variant="success" className="text-xs">
                    {discount.label}
                  </Badge>
                  <span className="text-gray-500">
                    {discount.description}
                  </span>
                </div>
                <span className="text-green-600 font-medium">
                  -{formatCurrency(discount.amount)}
                </span>
              </div>
            ))}
          </div>
        </>
      )}
      
      <Separator />
      
      <div className="flex justify-between text-lg font-bold">
        <span>ìµœì¢… ê²°ì œ ê¸ˆì•¡</span>
        <span className="text-blue-600">
          {formatCurrency(finalPrice)}
        </span>
      </div>
      
      {appliedDiscounts.length > 0 && (
        <div className="bg-green-50 text-green-700 text-sm p-2 rounded">
          ì´ {formatCurrency(basePrice - finalPrice)} í• ì¸ ì ìš©!
        </div>
      )}
    </div>
  )
}
```

## ğŸ”„ ìƒíƒœ ê´€ë¦¬

### Enrollment Store

```typescript
interface EnrollmentState {
  // ì›Œí¬í”Œë¡œìš° ìƒíƒœ
  workflow: {
    currentStep: 1 | 2 | 3
    completedSteps: number[]
    canProceed: boolean
  }
  
  // Step 1: í•™ìƒ ì„ íƒ
  studentSelection: {
    selectedStudent: Student | null
    searchQuery: string
    searchResults: Student[]
    isNewStudent: boolean
  }
  
  // Step 2: ìˆ˜ê°• êµ¬ì„±
  courseConfiguration: {
    availableCourses: Course[]
    selectedCourses: Course[]
    schedule: ScheduleAssignment[]
    packageType: 'individual' | 'package'
    conflicts: Conflict[]
  }
  
  // Step 3: ê²°ì œ
  payment: {
    pricing: {
      subtotal: number
      discounts: Discount[]
      total: number
    }
    method: PaymentMethod
    status: 'pending' | 'processing' | 'completed' | 'failed'
  }
  
  // ì•¡ì…˜
  actions: {
    // ì›Œí¬í”Œë¡œìš° ì œì–´
    nextStep: () => void
    previousStep: () => void
    goToStep: (step: number) => void
    
    // í•™ìƒ ì„ íƒ
    selectStudent: (student: Student) => void
    createNewStudent: (data: NewStudentData) => Promise<Student>
    searchStudents: (query: string) => Promise<void>
    
    // ìˆ˜ê°• êµ¬ì„±
    selectCourse: (course: Course) => void
    removeCourse: (courseId: string) => void
    assignSchedule: (assignment: ScheduleAssignment) => void
    detectConflicts: () => void
    
    // ê²°ì œ
    calculatePricing: () => void
    applyDiscount: (discount: Discount) => void
    processPayment: (method: PaymentMethod) => Promise<void>
    
    // ì „ì²´ í”„ë¡œì„¸ìŠ¤
    submitEnrollment: () => Promise<EnrollmentResult>
    resetEnrollment: () => void
  }
}
```

## ğŸ“± ë°˜ì‘í˜• ì„¤ê³„

### Mobile Layout (< 768px)
- ë‹¨ì¼ ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ
- Stepë³„ ì „ì²´ í™”ë©´ ì „í™˜
- í•˜ë‹¨ ê³ ì • ì•¡ì…˜ ë²„íŠ¼

### Tablet Layout (768px - 1024px)
- 2 ì»¬ëŸ¼ ë ˆì´ì•„ì›ƒ
- ì™¼ìª½: í•™ìƒ ì„ íƒ
- ì˜¤ë¥¸ìª½: ìˆ˜ê°• êµ¬ì„± + ê²°ì œ

### Desktop Layout (> 1024px)
- 3 íŒ¨ë„ ë ˆì´ì•„ì›ƒ (ì„¤ê³„ ê¸°ë³¸)
- ëª¨ë“  ì •ë³´ í•œ í™”ë©´ì— í‘œì‹œ

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### 1. ê²€ìƒ‰ ìµœì í™”
```typescript
// Debounced search with caching
const useStudentSearch = () => {
  const cache = useRef<Map<string, Student[]>>(new Map())
  
  const search = useMemo(
    () => debounce(async (query: string) => {
      if (cache.current.has(query)) {
        return cache.current.get(query)
      }
      
      const results = await searchStudents(query)
      cache.current.set(query, results)
      return results
    }, 300),
    []
  )
  
  return search
}
```

### 2. ê³¼ëª© ë°ì´í„° í”„ë¦¬ë¡œë”©
```typescript
// Preload popular courses
useEffect(() => {
  const preloadCourses = async () => {
    const popular = await getPopularCourses()
    setCourseCache(popular)
  }
  
  requestIdleCallback(preloadCourses)
}, [])
```

## ğŸ“Š ì„±ê³µ ì§€í‘œ

1. **ë“±ë¡ ì™„ë£Œìœ¨**: 80% ì´ìƒ (ì‹œì‘ â†’ ì™„ë£Œ)
2. **í‰ê·  ì†Œìš” ì‹œê°„**: 5ë¶„ ì´ë‚´
3. **ì˜¤ë¥˜ ë°œìƒë¥ **: 1% ë¯¸ë§Œ
4. **í• ì¸ ìë™ ì ìš©ë¥ **: 95% ì´ìƒ
5. **ì‚¬ìš©ì ë§Œì¡±ë„**: 4.5/5.0 ì´ìƒ

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì£¼ìš” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
1. **ë‹¨ì¼ í•™ìƒ ë‹¨ì¼ ê³¼ëª© ë“±ë¡**
2. **í˜•ì œ ë™ì‹œ ë‹¤ê³¼ëª© ë“±ë¡**
3. **ì‹œê°„ ì¶©ëŒ í•´ê²° í”„ë¡œì„¸ìŠ¤**
4. **ë³µì¡í•œ í• ì¸ ì¡°í•© ì ìš©**
5. **ê²°ì œ ì‹¤íŒ¨ ë° ì¬ì‹œë„**

## ğŸ“ˆ í–¥í›„ ê°œì„  ì‚¬í•­

1. **AI ì¶”ì²œ ì‹œìŠ¤í…œ**: í•™ìƒ í”„ë¡œí•„ ê¸°ë°˜ ê³¼ëª© ì¶”ì²œ
2. **ëŒ€ëŸ‰ ë“±ë¡ ëª¨ë“œ**: Excel ì—…ë¡œë“œë¡œ ì¼ê´„ ë“±ë¡
3. **ëª¨ë°”ì¼ ì•± ì—°ë™**: QR ì½”ë“œë¡œ ë¹ ë¥¸ ë“±ë¡
4. **ì˜¨ë¼ì¸ ê²°ì œ ê²Œì´íŠ¸ì›¨ì´**: ë‹¤ì–‘í•œ PGì‚¬ ì—°ë™

---

**ë‹¤ìŒ ë‹¨ê³„**: í´ë˜ìŠ¤ ê´€ë¦¬ v2 ì„¤ê³„ ë¬¸ì„œ ì‘ì„±