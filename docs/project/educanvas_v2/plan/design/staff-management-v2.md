# EduCanvas v2 ì§ì› ê´€ë¦¬ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ì„¤ê³„ ê°œìš”

**ì„¤ê³„ ì¼ì**: 2025-08-25  
**ì„¤ê³„ ë²„ì „**: v2.0 Staff Management  
**ì„¤ê³„ ë²”ìœ„**: í†µí•© ì§ì› ê´€ë¦¬ ì‹œìŠ¤í…œ (ê°•ì‚¬ + í–‰ì •ì§ì›)  
**í•µì‹¬ ì² í•™**: "ì—­í•  ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ì¸ë ¥ ê´€ë¦¬"

## ğŸ¯ ì„¤ê³„ ëª©í‘œ

### í•µì‹¬ ëª©í‘œ
1. **í†µí•© ê´€ë¦¬**: ê°•ì‚¬ì™€ í–‰ì •ì§ì›ì„ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì—ì„œ ê´€ë¦¬
2. **ì—­í•  ê¸°ë°˜ ë·°**: ì§ê¸‰/ì—­í• ë³„ ë§ì¶¤ ì¸í„°í˜ì´ìŠ¤
3. **ê¸‰ì—¬ ìë™í™”**: ë³µì¡í•œ ê¸‰ì—¬ ì •ì±… ìë™ ê³„ì‚°
4. **ì—…ë¬´ ê°€ì‹œí™”**: ë‹´ë‹¹ ì—…ë¬´ì™€ ì¼ì • í•œëˆˆì— íŒŒì•…

## ğŸ—ï¸ ë ˆì´ì•„ì›ƒ êµ¬ì¡°

### ì „ì²´ êµ¬ì¡° (Org Chart + Grid View)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header: ì§ì› ê´€ë¦¬ > [ì¡°ì§ë„] [ëª©ë¡] [ê¸‰ì—¬] [ê·¼íƒœ] [+ ì§ì› ì¶”ê°€]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                     â”‚
â”‚ ì‚¬ì´ë“œë°”     â”‚ ë©”ì¸ ì˜ì—­                                          â”‚
â”‚ (í•„í„°/ê·¸ë£¹)  â”‚                                                    â”‚
â”‚             â”‚ [ì¡°ì§ë„ ë·°]                                        â”‚
â”‚ [ê²€ìƒ‰ì°½]    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚             â”‚ â”‚                    ì›ì¥                          â”‚â”‚
â”‚ ì—­í• ë³„      â”‚ â”‚                     â”‚                           â”‚â”‚
â”‚ â–¡ ì›ì¥     â”‚ â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚â”‚
â”‚ â–¡ ë¶€ì›ì¥   â”‚ â”‚      â”‚              â”‚              â”‚           â”‚â”‚
â”‚ â–¡ íŒ€ì¥     â”‚ â”‚   êµë¬´ë¶€ì¥       í–‰ì •ë¶€ì¥       ê°•ì‚¬íŒ€ì¥        â”‚â”‚
â”‚ â–¡ ê°•ì‚¬     â”‚ â”‚      â”‚              â”‚              â”‚           â”‚â”‚
â”‚ â–¡ í–‰ì •ì§   â”‚ â”‚  â”Œâ”€â”€â”€â”´â”€â”€â”€â”    â”Œâ”€â”€â”€â”´â”€â”€â”€â”    â”Œâ”€â”€â”€â”´â”€â”€â”€â”       â”‚â”‚
â”‚ â–¡ íŒŒíŠ¸íƒ€ì„ â”‚ â”‚  ê°•ì‚¬A ê°•ì‚¬B   ì§ì›A ì§ì›B   ê°•ì‚¬C ê°•ì‚¬D       â”‚â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ ë¶€ì„œë³„      â”‚                                                     â”‚
â”‚ â–¼ êµë¬´ë¶€    â”‚ [ëª©ë¡ ë·°]                                          â”‚
â”‚ â–¼ í–‰ì •ë¶€    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â–¼ ìƒë‹´ë¶€    â”‚ â”‚ ì‚¬ì§„  ì´ë¦„   ì—­í•     ë‹´ë‹¹ì—…ë¬´   ê·¼ë¬´ì‹œê°„  ìƒíƒœ  â”‚â”‚
â”‚             â”‚ â”‚ [ê¹€] ê¹€ì˜í¬  ì›ì¥    ì „ì²´ì´ê´„   09-18   ê·¼ë¬´ì¤‘ â”‚â”‚
â”‚ ê³ ìš©í˜•íƒœ    â”‚ â”‚ [ì´] ì´ì² ìˆ˜  ê°•ì‚¬    ìˆ˜í•™A,B    14-22   ìˆ˜ì—…ì¤‘ â”‚â”‚
â”‚ â—‹ ì •ê·œì§   â”‚ â”‚ [ë°•] ë°•ë¯¼ìˆ˜  í–‰ì •    ìˆ˜ë‚©ê´€ë¦¬   09-18   ì™¸ê·¼   â”‚â”‚
â”‚ â—‹ ê³„ì•½ì§   â”‚ â”‚ [ìµœ] ìµœì§€ì€  ê°•ì‚¬    ì˜ì–´C,D    10-20   íœ´ê°€   â”‚â”‚
â”‚ â—‹ íŒŒíŠ¸íƒ€ì„ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚             â”‚                                                     â”‚
â”‚ ê·¼ë¬´ìƒíƒœ    â”‚ [ìƒì„¸ ì •ë³´ íŒ¨ë„ - ì„ íƒí•œ ì§ì›]                      â”‚
â”‚ â—‹ ê·¼ë¬´ì¤‘   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â—‹ íœ´ê°€ì¤‘   â”‚ â”‚ ê¸°ë³¸ì •ë³´ | ë‹´ë‹¹ì—…ë¬´ | ê¸‰ì—¬ì •ë³´ | ê·¼íƒœê¸°ë¡ | í‰ê°€ â”‚â”‚
â”‚ â—‹ í‡´ì§     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ´ í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 1. ì¡°ì§ë„ ë·° (Organization Chart)

```tsx
interface OrganizationChartView {
  // ì¡°ì§ êµ¬ì¡°
  structure: {
    root: StaffNode  // ì›ì¥/ëŒ€í‘œ
    departments: Department[]
    hierarchy: HierarchyLevel[]
  }
  
  // ë…¸ë“œ ì •ë³´
  staffNode: {
    id: string
    name: string
    role: string
    department?: string
    photo?: string
    
    // ìƒíƒœ í‘œì‹œ
    status: {
      workStatus: 'working' | 'break' | 'off' | 'vacation'
      currentTask?: string  // "ìˆ˜í•™Aë°˜ ìˆ˜ì—…ì¤‘"
      availability: 'available' | 'busy' | 'away'
    }
    
    // ì—°ê²° ì •ë³´
    connections: {
      supervisor?: string
      subordinates: string[]
      peers: string[]
    }
    
    // ë¹ ë¥¸ ì •ë³´
    quickInfo: {
      workload: number  // ì—…ë¬´ ë¶€í•˜ %
      classCount?: number
      studentCount?: number
      todaySchedule: string[]
    }
  }
  
  // ì¸í„°ë™ì…˜
  interactions: {
    expandable: boolean
    draggable: boolean  // ì¡°ì§ ì¬í¸ì„±
    
    onNodeClick: (staffId: string) => void
    onNodeHover: (staffId: string) => void
    onReorganize: (from: string, to: string) => void
  }
  
  // ì‹œê°í™” ì˜µì…˜
  visualization: {
    layout: 'tree' | 'radial' | 'force'
    showPhotos: boolean
    showStatus: boolean
    compactMode: boolean
    colorByDepartment: boolean
  }
}
```

### 2. ì§ì› ì¹´ë“œ/ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸

```tsx
interface StaffCard {
  // ê¸°ë³¸ ì •ë³´
  basicInfo: {
    id: string
    name: string
    photo?: string
    role: string
    department: string
    employeeNumber: string
    
    // ì—°ë½ì²˜
    contact: {
      phone: string
      email: string
      emergency?: string
    }
    
    // ê³ ìš© ì •ë³´
    employment: {
      type: 'full-time' | 'part-time' | 'contract'
      joinDate: Date
      contractEndDate?: Date
      probationEndDate?: Date
    }
  }
  
  // ì—…ë¬´ ì •ë³´
  workInfo: {
    // ê°•ì‚¬ì¸ ê²½ìš°
    instructor?: {
      subjects: string[]
      classes: Class[]
      studentCount: number
      weeklyHours: number
      expertise: string[]
    }
    
    // í–‰ì •ì§ì¸ ê²½ìš°
    admin?: {
      responsibilities: string[]
      permissions: Permission[]
      reports: string[]  // ì‘ì„± ë³´ê³ ì„œ
    }
    
    // ê³µí†µ
    workSchedule: {
      regularHours: string  // "09:00-18:00"
      workDays: WeekDay[]
      flexTime: boolean
    }
  }
  
  // ê¸‰ì—¬ ì •ë³´ (ê¶Œí•œì— ë”°ë¼ í‘œì‹œ)
  salaryInfo?: {
    type: 'monthly' | 'hourly' | 'per-class'
    base: number
    allowances: Allowance[]
    deductions: Deduction[]
    
    // ì„±ê³¼ê¸‰
    incentives: {
      studentBonus?: number
      performanceBonus?: number
      retentionBonus?: number
    }
    
    lastPayment: {
      date: Date
      amount: number
      status: 'paid' | 'pending'
    }
  }
  
  // ê·¼íƒœ ìš”ì•½
  attendance: {
    thisMonth: {
      workDays: number
      lateDays: number
      absentDays: number
      overtimeHours: number
    }
    
    todayStatus: 'not-yet' | 'on-time' | 'late' | 'absent' | 'off'
    currentLocation?: 'office' | 'class' | 'outside' | 'home'
  }
  
  // í‰ê°€/ì„±ê³¼
  performance: {
    rating: number  // 1-5
    lastEvaluation: Date
    kpis: KPI[]
    achievements: Achievement[]
    issues: Issue[]
  }
}
```

### 3. ê¸‰ì—¬ ê´€ë¦¬ íŒ¨ë„

```tsx
interface SalaryManagementPanel {
  // ê¸‰ì—¬ ëŒ€ì‹œë³´ë“œ
  dashboard: {
    // ì´ë²ˆ ë‹¬ ê¸‰ì—¬ ìš”ì•½
    currentMonth: {
      totalPayroll: number
      paidAmount: number
      pendingAmount: number
      employeeCount: number
      
      // ê¸‰ì—¬ ìœ í˜•ë³„
      byType: {
        monthly: { count: number; amount: number }
        hourly: { count: number; amount: number }
        perClass: { count: number; amount: number }
      }
      
      // ë¶€ì„œë³„
      byDepartment: {
        [dept: string]: number
      }
    }
    
    // ê¸‰ì—¬ ì¶”ì´
    trends: {
      months: Month[]
      totalPayroll: number[]
      avgSalary: number[]
      headcount: number[]
    }
  }
  
  // ê°œì¸ë³„ ê¸‰ì—¬ ê³„ì‚°
  individualCalculation: {
    employee: Staff
    
    // ê¸°ë³¸ê¸‰
    baseSalary: {
      amount: number
      calculation: string  // "ì›”ê¸‰ì—¬", "ì‹œê¸‰ x ì‹œê°„"
    }
    
    // ìˆ˜ë‹¹
    allowances: {
      overtime?: number
      meal?: number
      transport?: number
      position?: number
      longevity?: number
      custom: CustomAllowance[]
    }
    
    // ê³µì œ
    deductions: {
      tax: number
      insurance: {
        health: number
        pension: number
        employment: number
        accident: number
      }
      absence?: number
      advance?: number
    }
    
    // ì„±ê³¼ê¸‰ (ê°•ì‚¬)
    performanceBonus?: {
      studentCount: number
      retentionRate: number
      satisfaction: number
      total: number
    }
    
    // ìµœì¢… ê³„ì‚°
    final: {
      gross: number
      deductions: number
      net: number
    }
  }
  
  // ì¼ê´„ ì²˜ë¦¬
  batchProcessing: {
    // ê¸‰ì—¬ ìƒì„±
    generatePayroll: {
      month: string
      employees: Staff[]
      preview: PayrollPreview[]
      
      actions: {
        calculate: () => Promise<void>
        approve: () => Promise<void>
        process: () => Promise<void>
      }
    }
    
    // ê¸‰ì—¬ ëª…ì„¸ì„œ
    payslips: {
      generate: () => Promise<Payslip[]>
      send: (method: 'email' | 'print') => Promise<void>
      archive: () => Promise<void>
    }
  }
}
```

### 4. ê·¼íƒœ ê´€ë¦¬ ë·°

```tsx
interface AttendanceManagementView {
  // ì‹¤ì‹œê°„ ê·¼íƒœ í˜„í™©
  realtime: {
    // í˜„ì¬ ìƒíƒœ
    currentStatus: {
      total: number
      present: number
      late: number
      absent: number
      vacation: number
      outside: number
    }
    
    // ì‹¤ì‹œê°„ ì¶œí‡´ê·¼ ë¡œê·¸
    todayLogs: {
      time: Date
      employee: Staff
      type: 'check-in' | 'check-out' | 'break-start' | 'break-end'
      method: 'card' | 'mobile' | 'manual'
      location?: string
    }[]
    
    // ì´ìƒ ì§•í›„
    alerts: {
      notCheckedIn: Staff[]  // ì¶œê·¼ ì‹œê°„ ì§€ë‚¨
      overtime: Staff[]       // ì´ˆê³¼ ê·¼ë¬´ ì¤‘
      unauthorized: Staff[]   // ë¹„ì •ìƒ ìœ„ì¹˜
    }
  }
  
  // ìº˜ë¦°ë” ë·°
  calendar: {
    view: 'month' | 'week' | 'list'
    
    // ì¼ìë³„ ë°ì´í„°
    dates: {
      [date: string]: {
        employees: {
          staff: Staff
          status: AttendanceStatus
          workHours: number
          overtime?: number
          note?: string
        }[]
        
        summary: {
          attendanceRate: number
          avgWorkHours: number
          issues: string[]
        }
      }
    }
    
    // íœ´ê°€/íœ´ë¬´ ê´€ë¦¬
    leaves: {
      pending: LeaveRequest[]
      approved: LeaveRequest[]
      
      actions: {
        approve: (id: string) => Promise<void>
        reject: (id: string, reason: string) => Promise<void>
        cancel: (id: string) => Promise<void>
      }
    }
  }
  
  // ê·¼íƒœ ì •ì±…
  policies: {
    workHours: {
      regular: string  // "09:00-18:00"
      flexible: {
        core: string   // "10:00-16:00"
        range: string  // "07:00-22:00"
      }
    }
    
    overtime: {
      maxDaily: number
      maxMonthly: number
      approvalRequired: boolean
      rate: number  // 1.5x
    }
    
    leave: {
      annual: number
      sick: number
      special: LeaveType[]
      carryOver: boolean
    }
  }
}
```

### 5. ì§ì› ìƒì„¸ ì •ë³´ íŒ¨ë„

```tsx
interface StaffDetailPanel {
  // íƒ­ êµ¬ì¡°
  tabs: {
    // ê¸°ë³¸ ì •ë³´ íƒ­
    basicInfo: {
      personal: PersonalInfo
      contact: ContactInfo
      employment: EmploymentInfo
      documents: Document[]
    }
    
    // ë‹´ë‹¹ ì—…ë¬´ íƒ­
    responsibilities: {
      // ê°•ì‚¬
      teaching?: {
        currentClasses: Class[]
        subjects: Subject[]
        schedule: WeeklySchedule
        materials: TeachingMaterial[]
        
        performance: {
          studentCount: number
          avgAttendance: number
          satisfaction: number
          retentionRate: number
        }
      }
      
      // í–‰ì •
      administrative?: {
        tasks: Task[]
        projects: Project[]
        reports: Report[]
        approvals: Approval[]
      }
      
      // ê¶Œí•œ
      permissions: {
        system: SystemPermission[]
        data: DataPermission[]
        approval: ApprovalPermission[]
      }
    }
    
    // ê¸‰ì—¬ ì •ë³´ íƒ­
    salary: {
      current: {
        structure: SalaryStructure
        history: SalaryHistory[]
        projection: SalaryProjection
      }
      
      payments: {
        recent: Payment[]
        pending: Payment[]
        issues: PaymentIssue[]
      }
      
      documents: {
        contracts: Contract[]
        payslips: Payslip[]
        taxDocuments: TaxDocument[]
      }
    }
    
    // ê·¼íƒœ ê¸°ë¡ íƒ­
    attendance: {
      summary: {
        thisYear: YearlyAttendance
        thisMonth: MonthlyAttendance
        thisWeek: WeeklyAttendance
      }
      
      records: AttendanceRecord[]
      leaves: LeaveRecord[]
      overtime: OvertimeRecord[]
      
      patterns: {
        avgCheckIn: string
        avgCheckOut: string
        lateFrequency: number
        preferredWorkDays: string[]
      }
    }
    
    // í‰ê°€/êµìœ¡ íƒ­
    evaluation: {
      reviews: PerformanceReview[]
      goals: Goal[]
      training: Training[]
      certifications: Certification[]
      
      feedback: {
        from: Feedback[]  // ë°›ì€ í”¼ë“œë°±
        to: Feedback[]    // ì¤€ í”¼ë“œë°±
      }
    }
  }
}
```

## ğŸ¨ ì£¼ìš” UI ì»´í¬ë„ŒíŠ¸

### StaffOrgNode ì»´í¬ë„ŒíŠ¸ (ì¡°ì§ë„ ë…¸ë“œ)

```tsx
const StaffOrgNode = memo(({ 
  staff,
  isSelected,
  isExpanded,
  level,
  onSelect,
  onExpand
}: StaffOrgNodeProps) => {
  const statusColor = getStatusColor(staff.status)
  const workloadLevel = getWorkloadLevel(staff.workload)
  
  return (
    <div
      className={cn(
        "org-node",
        "relative bg-white rounded-lg border-2 p-3",
        "cursor-pointer transition-all",
        "hover:shadow-lg hover:scale-105",
        isSelected && "ring-2 ring-blue-500",
        level === 0 && "border-purple-500",  // ì›ì¥
        level === 1 && "border-blue-500",    // ë¶€ì¥
        level === 2 && "border-green-500"    // íŒ€ì›
      )}
      onClick={() => onSelect(staff.id)}
    >
      {/* í”„ë¡œí•„ */}
      <div className="flex items-center gap-3">
        <Avatar className="h-10 w-10">
          <AvatarImage src={staff.photo} />
          <AvatarFallback>{staff.name[0]}</AvatarFallback>
        </Avatar>
        
        <div className="flex-1">
          <h4 className="font-semibold text-sm">{staff.name}</h4>
          <p className="text-xs text-gray-600">{staff.role}</p>
        </div>
        
        {/* ìƒíƒœ ì¸ë””ì¼€ì´í„° */}
        <div className="flex flex-col items-end gap-1">
          <Badge 
            variant="dot"
            className={cn(
              "text-xs",
              statusColor
            )}
          >
            {staff.status}
          </Badge>
          
          {staff.currentTask && (
            <span className="text-xs text-gray-500">
              {staff.currentTask}
            </span>
          )}
        </div>
      </div>
      
      {/* ì—…ë¬´ ë¶€í•˜ ê²Œì´ì§€ */}
      {staff.workload !== undefined && (
        <div className="mt-2">
          <div className="flex justify-between text-xs mb-1">
            <span className="text-gray-500">ì—…ë¬´ëŸ‰</span>
            <span className={cn(
              "font-medium",
              workloadLevel === 'high' && "text-red-600",
              workloadLevel === 'medium' && "text-yellow-600",
              workloadLevel === 'low' && "text-green-600"
            )}>
              {staff.workload}%
            </span>
          </div>
          <Progress 
            value={staff.workload} 
            className="h-1.5"
            indicatorClassName={cn(
              workloadLevel === 'high' && "bg-red-500",
              workloadLevel === 'medium' && "bg-yellow-500",
              workloadLevel === 'low' && "bg-green-500"
            )}
          />
        </div>
      )}
      
      {/* í•˜ìœ„ ì§ì› ìˆ˜ */}
      {staff.subordinates?.length > 0 && (
        <button
          className="absolute -bottom-3 left-1/2 transform -translate-x-1/2"
          onClick={(e) => {
            e.stopPropagation()
            onExpand(staff.id)
          }}
        >
          <div className="bg-white border rounded-full px-2 py-0.5 text-xs">
            {isExpanded ? 'âˆ’' : '+'} {staff.subordinates.length}
          </div>
        </button>
      )}
    </div>
  )
})
```

### SalaryCalculator ì»´í¬ë„ŒíŠ¸

```tsx
const SalaryCalculator = ({ employee, month }) => {
  const [calculation, setCalculation] = useState<SalaryCalculation | null>(null)
  const [isCalculating, setIsCalculating] = useState(false)
  
  useEffect(() => {
    calculateSalary()
  }, [employee, month])
  
  const calculateSalary = async () => {
    setIsCalculating(true)
    
    try {
      // ê¸°ë³¸ê¸‰ ê³„ì‚°
      const base = calculateBaseSalary(employee)
      
      // ìˆ˜ë‹¹ ê³„ì‚°
      const allowances = calculateAllowances(employee, month)
      
      // ê³µì œ ê³„ì‚°
      const deductions = calculateDeductions(base + allowances.total)
      
      // ì„±ê³¼ê¸‰ ê³„ì‚° (ê°•ì‚¬)
      const bonus = employee.role === 'instructor' 
        ? await calculatePerformanceBonus(employee, month)
        : 0
      
      setCalculation({
        base,
        allowances,
        deductions,
        bonus,
        gross: base + allowances.total + bonus,
        net: base + allowances.total + bonus - deductions.total
      })
    } finally {
      setIsCalculating(false)
    }
  }
  
  if (isCalculating) {
    return <CalculationSkeleton />
  }
  
  return (
    <Card className="salary-calculator">
      <CardHeader>
        <CardTitle>ê¸‰ì—¬ ê³„ì‚°ì„œ</CardTitle>
        <CardDescription>
          {employee.name} Â· {month}
        </CardDescription>
      </CardHeader>
      
      <CardContent className="space-y-4">
        {/* ê¸°ë³¸ê¸‰ */}
        <div className="space-y-2">
          <div className="flex justify-between font-medium">
            <span>ê¸°ë³¸ê¸‰</span>
            <span>{formatCurrency(calculation.base)}</span>
          </div>
        </div>
        
        <Separator />
        
        {/* ìˆ˜ë‹¹ */}
        <div className="space-y-2">
          <h4 className="font-medium text-sm text-gray-600">ìˆ˜ë‹¹</h4>
          {Object.entries(calculation.allowances).map(([key, value]) => (
            <div key={key} className="flex justify-between text-sm">
              <span className="text-gray-600">{getAllowanceName(key)}</span>
              <span>+{formatCurrency(value)}</span>
            </div>
          ))}
        </div>
        
        <Separator />
        
        {/* ê³µì œ */}
        <div className="space-y-2">
          <h4 className="font-medium text-sm text-gray-600">ê³µì œ</h4>
          {Object.entries(calculation.deductions).map(([key, value]) => (
            <div key={key} className="flex justify-between text-sm">
              <span className="text-gray-600">{getDeductionName(key)}</span>
              <span className="text-red-600">-{formatCurrency(value)}</span>
            </div>
          ))}
        </div>
        
        {/* ì„±ê³¼ê¸‰ */}
        {calculation.bonus > 0 && (
          <>
            <Separator />
            <div className="flex justify-between font-medium">
              <span>ì„±ê³¼ê¸‰</span>
              <span className="text-green-600">+{formatCurrency(calculation.bonus)}</span>
            </div>
          </>
        )}
        
        <Separator />
        
        {/* ìµœì¢… ê¸ˆì•¡ */}
        <div className="space-y-2 bg-gray-50 p-3 rounded">
          <div className="flex justify-between">
            <span>ì´ ì§€ê¸‰ì•¡</span>
            <span>{formatCurrency(calculation.gross)}</span>
          </div>
          <div className="flex justify-between">
            <span>ì´ ê³µì œì•¡</span>
            <span className="text-red-600">-{formatCurrency(calculation.deductions.total)}</span>
          </div>
          <Separator />
          <div className="flex justify-between text-lg font-bold">
            <span>ì‹¤ ìˆ˜ë ¹ì•¡</span>
            <span className="text-blue-600">{formatCurrency(calculation.net)}</span>
          </div>
        </div>
      </CardContent>
      
      <CardFooter>
        <Button variant="outline" className="w-full">
          ê¸‰ì—¬ëª…ì„¸ì„œ ë°œí–‰
        </Button>
      </CardFooter>
    </Card>
  )
}
```

## ğŸ”„ ìƒíƒœ ê´€ë¦¬

### Staff Store

```typescript
interface StaffState {
  // ë·° ìƒíƒœ
  view: {
    mode: 'org-chart' | 'list' | 'grid'
    filters: StaffFilters
    sorting: SortOptions
    selectedStaff: string | null
  }
  
  // ì§ì› ë°ì´í„°
  staff: {
    all: StaffMember[]
    filtered: StaffMember[]
    departments: Department[]
    hierarchy: OrgStructure
  }
  
  // ê¸‰ì—¬ ê´€ë¦¬
  salary: {
    currentMonth: MonthlyPayroll
    calculations: SalaryCalculation[]
    policies: SalaryPolicy[]
  }
  
  // ê·¼íƒœ ê´€ë¦¬
  attendance: {
    today: TodayAttendance
    records: AttendanceRecord[]
    leaves: LeaveRequest[]
  }
  
  // ì•¡ì…˜
  actions: {
    // CRUD
    createStaff: (data: CreateStaffData) => Promise<void>
    updateStaff: (id: string, data: UpdateStaffData) => Promise<void>
    deleteStaff: (id: string) => Promise<void>
    
    // ì¡°ì§ ê´€ë¦¬
    reorganize: (staffId: string, newSupervisor: string) => Promise<void>
    changeRole: (staffId: string, newRole: string) => Promise<void>
    
    // ê¸‰ì—¬
    calculateSalary: (staffId: string, month: string) => Promise<SalaryCalculation>
    processSalary: (calculations: SalaryCalculation[]) => Promise<void>
    
    // ê·¼íƒœ
    checkIn: (staffId: string) => Promise<void>
    checkOut: (staffId: string) => Promise<void>
    approveLeave: (leaveId: string) => Promise<void>
  }
}
```

## ğŸ“Š ì„±ê³µ ì§€í‘œ

1. **ê¸‰ì—¬ ê³„ì‚° ì •í™•ë„**: 99.9%
2. **ê·¼íƒœ ê´€ë¦¬ ìë™í™”**: 80% ì´ìƒ
3. **ì¡°ì§ë„ ì‹¤ì‹œê°„ì„±**: < 1ì´ˆ ì—…ë°ì´íŠ¸
4. **ì§ì› ê²€ìƒ‰ ì†ë„**: < 500ms
5. **ê´€ë¦¬ì ë§Œì¡±ë„**: 4.7/5.0

---

**ë‹¤ìŒ ë‹¨ê³„**: ì‹œê°„í‘œ ì„¤ê³„ ë¬¸ì„œ ì‘ì„±