# T-051 - 학원 설정 페이지: 과목/과정 관리 UI 구현

**생성일**: 2025-08-19  
**담당자**: Frontend Developer  
**예상 시간**: 1.5일  
**우선순위**: P0 (MVP 필수)  
**상태**: 📝 TODO  
**스프린트**: S2  
**기한**: 2025-08-22

---

## 🎯 작업 개요

T-015에서 구현된 학원별 과목/과정 커스터마이징 API의 프론트엔드 UI를 구현합니다. 관리자가 웹에서 직접 학원의 과목과 과정을 추가, 수정, 삭제, 순서 변경할 수 있는 완전한 관리 인터페이스를 제공합니다.

## 📋 요구사항

### 1. **페이지 구조**
- **경로**: `/admin/settings/subjects-courses`
- **권한**: tenant_admin, admin 이상
- **레이아웃**: MainLayout 기반
- **탭 구조**: 과목 관리 / 과정 관리

### 2. **과목 관리 기능**
- [x] 과목 목록 조회 및 표시
- [ ] 새 과목 추가 (이름, 코드, 설명, 색상)
- [ ] 기존 과목 수정
- [ ] 과목 활성화/비활성화 토글
- [ ] 과목 표시 순서 변경 (드래그앤드롭)
- [ ] 과목 삭제 (사용 중인 과목은 경고 표시)

### 3. **과정 관리 기능**
- [x] 과정 목록 조회 및 표시
- [ ] 새 과정 추가 (이름, 코드, 설명, 색상)
- [ ] 기존 과정 수정
- [ ] 과정 활성화/비활성화 토글
- [ ] 과정 표시 순서 변경 (드래그앤드롭)
- [ ] 과정 삭제 (사용 중인 과정은 경고 표시)

### 4. **사용성 요구사항**
- [ ] 실시간 검증 및 에러 표시
- [ ] 색상 선택기 (프리셋 + 커스텀)
- [ ] 변경사항 즉시 반영
- [ ] 사용 중인 과목/과정 삭제 시 경고
- [ ] 성공/실패 토스트 메시지

---

## 🔧 기술 스펙

### **사용할 API 엔드포인트**
- `GET /api/tenant-subjects?tenantId={id}&includeInactive=true`
- `POST /api/tenant-subjects` - 과목 생성
- `PUT /api/tenant-subjects/{id}` - 과목 수정 (구현 필요)
- `DELETE /api/tenant-subjects/{id}` - 과목 삭제 (구현 필요)
- `GET /api/tenant-courses?tenantId={id}&includeInactive=true`
- `POST /api/tenant-courses` - 과정 생성
- `PUT /api/tenant-courses/{id}` - 과정 수정 (구현 필요)
- `DELETE /api/tenant-courses/{id}` - 과정 삭제 (구현 필요)

### **컴포넌트 구조**
```
src/app/admin/settings/subjects-courses/page.tsx
src/components/admin/settings/
├── SubjectsCoursesManagement.tsx    # 메인 컴포넌트
├── SubjectsTab.tsx                  # 과목 관리 탭
├── CoursesTab.tsx                   # 과정 관리 탭
├── SubjectForm.tsx                  # 과목 추가/수정 폼
├── CourseForm.tsx                   # 과정 추가/수정 폼
├── SubjectCard.tsx                  # 과목 카드 (드래그 가능)
├── CourseCard.tsx                   # 과정 카드 (드래그 가능)
└── ColorPicker.tsx                  # 색상 선택기
```

### **상태 관리**
- **Zustand 스토어**: `useSubjectsCoursesStore.ts`
- **로컬 상태**: React Hook Form + 모달 상태
- **실시간 업데이트**: 변경 후 목록 즉시 새로고침

---

## 📊 성공 기준

### **기능 검증**
- [ ] 과목/과정 CRUD 모든 기능 정상 작동
- [ ] 드래그앤드롭으로 순서 변경 가능
- [ ] 색상 변경이 클래스 생성 폼에 즉시 반영
- [ ] 사용 중인 항목 삭제 시 경고 표시
- [ ] 권한별 접근 제어 정상 작동

### **사용성 검증**
- [ ] 관리자가 5분 내에 새 과목/과정 추가 가능
- [ ] 모든 폼 검증 메시지가 명확함
- [ ] 변경사항이 클래스 생성 시 즉시 반영됨
- [ ] 모바일에서도 기본 기능 사용 가능

### **성능 검증**  
- [ ] 50개 과목/과정에서도 부드러운 드래그앤드롭
- [ ] API 응답 시간 300ms 이내
- [ ] 페이지 로딩 2초 이내

---

## 🔗 의존성

### **선행 완료 필요**
- ✅ T-015: 클래스 생성 및 관리 기능 (API 기반 완성)
- ✅ T-010: 공통 레이아웃 컴포넌트 개발
- ✅ T-006: 기본 UI 컴포넌트 라이브러리 구축

### **후속 영향**
- **T-016**: 강사 관리 시스템 (UI 패턴 재사용)
- **T-022**: ClassFlow 드래그앤드롭 (순서 변경 패턴 재사용)
- **모든 폼**: 색상 선택기 컴포넌트 재사용 가능

---

## 📝 구현 단계

### **Day 1 (0.8일)**
1. **페이지 및 기본 컴포넌트 생성** (2시간)
   - 페이지 라우트 생성
   - 탭 구조 기본 레이아웃
   - 권한 검증 적용

2. **과목 관리 탭 구현** (3시간)
   - 과목 목록 조회 및 표시
   - 과목 추가 폼 구현
   - 색상 선택기 구현

3. **과정 관리 탭 구현** (1.5시간)
   - 과정 목록 조회 및 표시  
   - 과정 추가 폼 구현

### **Day 2 (0.7일)**
1. **CRUD 기능 완성** (3시간)
   - 수정/삭제 API 구현 및 연동
   - 폼 검증 및 에러 처리
   - 토스트 메시지 연동

2. **드래그앤드롭 순서 변경** (2시간)
   - @dnd-kit 사용하여 순서 변경
   - 순서 업데이트 API 연동

3. **테스트 및 최종 검수** (1시간)
   - 모든 기능 통합 테스트
   - 사용성 검증 및 버그 수정

---

## ⚠️ 주의사항

### **데이터 무결성**
- 사용 중인 과목/과정 삭제 시 관련 클래스 확인 필요
- 순서 변경 시 동시성 문제 고려
- 삭제된 과목/과정이 클래스에서 제거되지 않도록 소프트 삭제 고려

### **권한 관리**  
- tenant_admin은 자신의 테넌트만 수정 가능
- system_admin은 모든 테넌트 수정 가능
- 다른 사용자가 동시 수정 시 충돌 방지

### **성능 고려사항**
- 과목/과정이 100개 이상일 때를 대비한 가상화 고려
- 드래그앤드롭 시 60fps 유지
- API 호출 최소화 (배치 업데이트)

---

**생성자**: Lead Developer  
**연결된 태스크**: T-015 (클래스 관리), T-022 (ClassFlow)  
**문서 참조**: `/docs/project_manual/UI-Components-Manual.md`