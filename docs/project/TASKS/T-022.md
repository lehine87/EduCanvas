---
id: T-022
title: "@dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¸íŒ… ë° ê¸°ë³¸ êµ¬í˜„"
status: TODO
priority: P0
assignees: [Lead Dev]
estimate: 1.0d
due: 2025-09-10
sprint: S3
dependencies: [T-021]
labels: [classflow, drag-and-drop, core-feature]
---

# T-022: @dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¸íŒ… ë° ê¸°ë³¸ êµ¬í˜„

## ğŸ“‹ ì‘ì—… ê°œìš”

EduCanvasì˜ í‚¬ëŸ¬ ê¸°ëŠ¥ì¸ ClassFlow ë“œë˜ê·¸ì•¤ë“œë¡­ ì‹œìŠ¤í…œì˜ ê¸°ë°˜ì„ êµ¬ì¶•í•©ë‹ˆë‹¤. @dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•˜ì—¬ 60fps ì„±ëŠ¥ê³¼ ì™„ë²½í•œ ì ‘ê·¼ì„±ì„ ì§€ì›í•˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­ ì¸í„°í˜ì´ìŠ¤ì˜ í•µì‹¬ êµ¬ì¡°ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.

## ğŸ¯ ëª©ì 

- @dnd-kit ê¸°ë°˜ ê³ ì„±ëŠ¥ ë“œë˜ê·¸ì•¤ë“œë¡­ ì‹œìŠ¤í…œ êµ¬ì¶•
- í•™ìƒ ì¹´ë“œì™€ í´ë˜ìŠ¤ ë°•ìŠ¤ ê°„ì˜ ë“œë˜ê·¸ì•¤ë“œë¡­ ìƒí˜¸ì‘ìš© êµ¬í˜„
- 60fps ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ìµœì í™”ëœ ê¸°ë³¸ êµ¬ì¡° í™•ë¦½
- ì ‘ê·¼ì„±ì„ ê³ ë ¤í•œ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ê¸°ë°˜ ë§ˆë ¨

## ğŸ—ï¸ êµ¬í˜„ í•­ëª©

### 1. @dnd-kit ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì •
- [ ] DndContext í”„ë¡œë°”ì´ë” ì„¤ì •
- [ ] ë“œë˜ê·¸ì•¤ë“œë¡­ ì„¼ì„œ êµ¬ì„± (ë§ˆìš°ìŠ¤, í„°ì¹˜, í‚¤ë³´ë“œ)
- [ ] ì¶©ëŒ ê°ì§€ ì•Œê³ ë¦¬ì¦˜ ì„ íƒ (closestCenter)
- [ ] ì ‘ê·¼ì„± ì„¤ì • (announcements, screen reader ì§€ì›)

### 2. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ì„¤ê³„
- [ ] DraggableStudentCard ì»´í¬ë„ŒíŠ¸ ê¸°ë³¸ êµ¬ì¡°
- [ ] DroppableClassBox ì»´í¬ë„ŒíŠ¸ ê¸°ë³¸ êµ¬ì¡°  
- [ ] DragOverlay ì»´í¬ë„ŒíŠ¸ (ë“œë˜ê·¸ ì¤‘ í”„ë¦¬ë·°)
- [ ] ClassFlowContainer ìµœìƒìœ„ ì»¨í…Œì´ë„ˆ

### 3. ìƒíƒœ ê´€ë¦¬ ì•„í‚¤í…ì²˜
- [ ] classflowStore (Zustand) ê¸°ë³¸ êµ¬ì¡° ì„¤ê³„
- [ ] ë“œë˜ê·¸ ìƒíƒœ ê´€ë¦¬ (draggedStudent, targetClass)
- [ ] ë‚™ê´€ì  ì—…ë°ì´íŠ¸ êµ¬ì¡° ì„¤ê³„
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡¤ë°± ë©”ì»¤ë‹ˆì¦˜ ê¸°ì´ˆ

### 4. ê¸°ë³¸ ë“œë˜ê·¸ì•¤ë“œë¡­ í”Œë¡œìš°
```typescript
// ê¸°ë³¸ ë“œë˜ê·¸ì•¤ë“œë¡­ í”Œë¡œìš°
1. onDragStart: ë“œë˜ê·¸ ì‹œì‘ ì‹œ í•™ìƒ ì •ë³´ ì €ì¥
2. onDragOver: ë“œë˜ê·¸ ì¤‘ íƒ€ê²Ÿ í´ë˜ìŠ¤ í•˜ì´ë¼ì´íŠ¸
3. onDragEnd: ë“œë¡­ ì‹œ í•™ìƒ ì´ë™ ì²˜ë¦¬
4. ì—ëŸ¬ ì²˜ë¦¬: ì‹¤íŒ¨ ì‹œ ì›ìƒ ë³µêµ¬
```

## âœ… ì™„ë£Œ ê¸°ì¤€ (Acceptance Criteria)

### í•„ìˆ˜ ê¸°ëŠ¥
- [ ] í•™ìƒ ì¹´ë“œë¥¼ ë“œë˜ê·¸í•˜ì—¬ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¡œ ì´ë™ ê°€ëŠ¥
- [ ] ë“œë˜ê·¸ ì¤‘ ì‹œê°ì  í”¼ë“œë°± (DragOverlay) ì •ìƒ ë™ì‘
- [ ] ë“œë¡­ ê°€ëŠ¥í•œ ì˜ì—­ê³¼ ë¶ˆê°€ëŠ¥í•œ ì˜ì—­ êµ¬ë¶„ í‘œì‹œ
- [ ] ë“œë˜ê·¸ì•¤ë“œë¡­ ì·¨ì†Œ ê¸°ëŠ¥ (ESC í‚¤)

### ì„±ëŠ¥ ê¸°ì¤€
- [ ] 100ê°œ í•™ìƒ ì¹´ë“œì—ì„œ ë¶€ë“œëŸ¬ìš´ ë“œë˜ê·¸ ë™ì‘ (60fps ìœ ì§€)
- [ ] ë“œë˜ê·¸ ì‹œì‘ ì‘ë‹µì‹œê°„ < 100ms
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ (React DevToolsë¡œ í™•ì¸)

### ì ‘ê·¼ì„± ê¸°ì¤€
- [ ] í‚¤ë³´ë“œë¡œ ë“œë˜ê·¸ì•¤ë“œë¡­ ì‘ì—… ê°€ëŠ¥ (Tab, Space, Arrow keys)
- [ ] ìŠ¤í¬ë¦° ë¦¬ë”ì—ì„œ ë“œë˜ê·¸ì•¤ë“œë¡­ ìƒí™© ì ì ˆíˆ ì•ˆë‚´
- [ ] í¬ì»¤ìŠ¤ ê´€ë¦¬ ì •ìƒ ë™ì‘

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### 1. ê¸°ë³¸ ë“œë˜ê·¸ì•¤ë“œë¡­ í…ŒìŠ¤íŠ¸
```typescript
// í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. í•™ìƒ ì¹´ë“œ ì„ íƒ â†’ ë“œë˜ê·¸ ì‹œì‘
2. ë‹¤ë¥¸ í´ë˜ìŠ¤ ë°•ìŠ¤ë¡œ ì´ë™ â†’ í•˜ì´ë¼ì´íŠ¸ í™•ì¸  
3. ë“œë¡­ â†’ í•™ìƒ ì´ë™ ì™„ë£Œ í™•ì¸
```

### 2. í‚¤ë³´ë“œ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸
```typescript  
// í‚¤ë³´ë“œ ì¡°ì‘ í…ŒìŠ¤íŠ¸
1. Tabí‚¤ë¡œ í•™ìƒ ì¹´ë“œ í¬ì»¤ìŠ¤
2. Spaceí‚¤ë¡œ ë“œë˜ê·¸ ëª¨ë“œ ì§„ì…
3. Arrowí‚¤ë¡œ ì´ë™ ë°©í–¥ ì„ íƒ
4. Enterí‚¤ë¡œ ë“œë¡­ ì‹¤í–‰
```

### 3. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
```typescript
// ì„±ëŠ¥ ì¸¡ì •
1. 100ê°œ í•™ìƒ ì¹´ë“œ ë Œë”ë§
2. ì—°ì† ë“œë˜ê·¸ì•¤ë“œë¡­ 10íšŒ ìˆ˜í–‰
3. FPS ì¸¡ì • â†’ 60fps ì´ìƒ í™•ì¸
4. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
```

### 4. ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
```typescript
// ì—ëŸ¬ ìƒí™© í…ŒìŠ¤íŠ¸  
1. ë“œë˜ê·¸ ì¤‘ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€
2. ì˜ëª»ëœ ë“œë¡­ ìœ„ì¹˜ì— ë“œë¡­
3. ê¶Œí•œ ì—†ëŠ” í´ë˜ìŠ¤ë¡œ ì´ë™ ì‹œë„
4. â†’ ëª¨ë“  ê²½ìš° ì ì ˆí•œ ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ classflow/
â”‚       â”œâ”€â”€ ClassFlowContainer.tsx       # ìµœìƒìœ„ ì»¨í…Œì´ë„ˆ
â”‚       â”œâ”€â”€ DraggableStudentCard.tsx     # ë“œë˜ê·¸ ê°€ëŠ¥í•œ í•™ìƒ ì¹´ë“œ
â”‚       â”œâ”€â”€ DroppableClassBox.tsx        # ë“œë¡­ ê°€ëŠ¥í•œ í´ë˜ìŠ¤ ë°•ìŠ¤
â”‚       â”œâ”€â”€ DragOverlay.tsx              # ë“œë˜ê·¸ ì¤‘ ì˜¤ë²„ë ˆì´
â”‚       â””â”€â”€ index.ts                     # ì»´í¬ë„ŒíŠ¸ exports
â”œâ”€â”€ store/
â”‚   â””â”€â”€ classflowStore.ts                # ë“œë˜ê·¸ì•¤ë“œë¡­ ì „ìš© ìŠ¤í† ì–´
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useClassFlow.ts                  # ë“œë˜ê·¸ì•¤ë“œë¡­ ë¡œì§ í›…
â””â”€â”€ types/
    â””â”€â”€ classflow.ts                     # ë“œë˜ê·¸ì•¤ë“œë¡­ íƒ€ì… ì •ì˜
```

## ğŸ’» í•µì‹¬ êµ¬í˜„ ì½”ë“œ

### 1. ClassFlowContainer.tsx ê¸°ë³¸ êµ¬ì¡°
```typescript
import { DndContext, DragEndEvent, DragStartEvent } from '@dnd-kit/core';
import { useClassFlowStore } from '@/store/classflowStore';

export function ClassFlowContainer({ children }: { children: React.ReactNode }) {
  const { startDrag, endDrag, draggedStudent } = useClassFlowStore();

  const handleDragStart = (event: DragStartEvent) => {
    const { active } = event;
    startDrag(active.id as string);
  };

  const handleDragEnd = (event: DragEndEvent) => {
    const { active, over } = event;
    
    if (over && active.id !== over.id) {
      endDrag(active.id as string, over.id as string);
    } else {
      endDrag(null, null); // ì·¨ì†Œ
    }
  };

  return (
    <DndContext
      onDragStart={handleDragStart}
      onDragEnd={handleDragEnd}
    >
      {children}
      <DragOverlay>
        {draggedStudent && (
          <StudentCard student={draggedStudent} isDragging />
        )}
      </DragOverlay>
    </DndContext>
  );
}
```

### 2. classflowStore.ts ê¸°ë³¸ êµ¬ì¡°
```typescript
import { create } from 'zustand';
import { Student, Class } from '@/types/database';

interface ClassFlowState {
  // ë“œë˜ê·¸ ìƒíƒœ
  draggedStudent: Student | null;
  targetClass: Class | null;
  
  // í•™ìƒ ë°ì´í„° (ìµœì í™”ëœ êµ¬ì¡°)
  studentsByClass: Map<string, Student[]>;
  
  // ì•¡ì…˜
  startDrag: (studentId: string) => void;
  endDrag: (studentId: string | null, targetClassId: string | null) => void;
  moveStudent: (studentId: string, targetClassId: string) => Promise<void>;
}

export const useClassFlowStore = create<ClassFlowState>((set, get) => ({
  draggedStudent: null,
  targetClass: null,
  studentsByClass: new Map(),
  
  startDrag: (studentId) => {
    const student = findStudentById(studentId);
    set({ draggedStudent: student });
  },
  
  endDrag: async (studentId, targetClassId) => {
    if (studentId && targetClassId) {
      await get().moveStudent(studentId, targetClassId);
    }
    set({ draggedStudent: null, targetClass: null });
  },
  
  moveStudent: async (studentId, targetClassId) => {
    // ë‚™ê´€ì  ì—…ë°ì´íŠ¸ êµ¬í˜„
    try {
      // UI ì¦‰ì‹œ ì—…ë°ì´íŠ¸
      optimisticallyMoveStudent(studentId, targetClassId);
      
      // API í˜¸ì¶œ
      await moveStudentAPI(studentId, targetClassId);
      
    } catch (error) {
      // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
      revertStudentMove(studentId);
      throw error;
    }
  }
}));
```

## ğŸš¨ ìœ„í—˜ ìš”ì†Œ ë° ì™„í™” ë°©ì•ˆ

### ë†’ì€ ìœ„í—˜
**ì„±ëŠ¥ ì €í•˜ ìœ„í—˜**
- ìœ„í—˜: ëŒ€ëŸ‰ ë°ì´í„°ì—ì„œ ë“œë˜ê·¸ ì‘ë‹µ ì§€ì—°
- ì™„í™”: React.memo, useMemo ì ê·¹ í™œìš©, ê°€ìƒí™” ì ìš© ê²€í† 

**ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬**
- ìœ„í—˜: ë“œë˜ê·¸ì•¤ë“œë¡­ ì¤‘ ìƒíƒœ ë™ê¸°í™” ë¬¸ì œ
- ì™„í™”: ë‹¨ìˆœí•œ ìƒíƒœ êµ¬ì¡° ì„¤ê³„, ì² ì €í•œ í…ŒìŠ¤íŠ¸

### ì¤‘ê°„ ìœ„í—˜
**ì ‘ê·¼ì„± êµ¬í˜„ ë³µì¡ì„±**
- ìœ„í—˜: í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ êµ¬í˜„ ì–´ë ¤ì›€
- ì™„í™”: @dnd-kitì˜ ì ‘ê·¼ì„± ê¸°ëŠ¥ ìµœëŒ€ í™œìš©

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [@dnd-kit Documentation](https://docs.dndkit.com/)
- [Performance Best Practices](https://docs.dndkit.com/guides/performance)
- [Accessibility Guidelines](https://docs.dndkit.com/guides/accessibility)
- [EduCanvas ê¸°ëŠ¥ìš”êµ¬ì„œ.md](../../docs/ê¸°ëŠ¥ìš”êµ¬ì„œ.md)

## ğŸ”„ í›„ì† ì‘ì—…

ì´ íƒœìŠ¤í¬ ì™„ë£Œ í›„ ì—°ê²°ë˜ëŠ” ì‘ì—…ë“¤:
- T-023: StudentCard ì»´í¬ë„ŒíŠ¸ ê°œë°œ (ë“œë˜ê·¸ ê°€ëŠ¥)
- T-024: ClassBox ì»´í¬ë„ŒíŠ¸ ê°œë°œ (ë“œë¡­ ê°€ëŠ¥)  
- T-025: DragOverlay ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„
- T-026: ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ë³¸ ì´ë™ ë¡œì§ ì™„ì„±

---

**ì‘ì„±ì**: Lead Dev  
**ê²€í† ì**: Frontend Dev  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-08-08  
**ê´€ë ¨ ìŠ¤í”„ë¦°íŠ¸**: S3 (ClassFlow ë“œë˜ê·¸ì•¤ë“œë¡­)  
**ê´€ë ¨ Epic**: ClassFlow í‚¬ëŸ¬ ê¸°ëŠ¥