# EduCanvas 종합 개발 플랜 2025-08-08

**작성일**: 2025-08-08  
**버전**: 1.0  
**기준**: ./docs 문서 분석 결과 기반 통합 플랜

---

## 📋 문서 분석 요약

### 프로젝트 진화 타임라인 (문서 생성 순서)

| 순서 | 문서 | 핵심 내용 | 상태 |
|------|------|-----------|------|
| 1 | `legacy_tech_stack_selection.md` | Next.js + Supabase 기술 스택 확정 | ✅ 완료 |
| 2 | `legacy_comprehensive_development_plan_2025.md` | 6개월 마스터 플랜, 18억 수익 목표 | 📋 참고용 |
| 3 | `class_management_implementation.md` | 엔터프라이즈급 시스템 설계 | 🔄 진행중 |
| 4 | `project_setup_guide.md` | 실제 프로젝트 초기 설정 | ✅ 완료 |
| 5 | `folder_system.md` | 모듈별 폴더 구조 | 🔄 개선 필요 |
| 6 | `project_structure_improvement.md` | 구조 개선 제안 | 📋 참고용 |
| 7 | `educanvas_structure_improvement.md` | **최신 구조 개선안** | 🎯 **적용 대상** |

---

## 🎯 현재 상태 평가

### ✅ 완료된 기반 작업
- **기술 스택 확정**: Next.js 15 + React 19 + Supabase + TailwindCSS 4
- **프로젝트 생성**: package.json 설정, 기본 폴더 구조
- **핵심 컴포넌트**: ClassBox, StudentTable, DragDropContext
- **상태 관리**: Zustand 기반 스토어 (students, classes, auth)
- **데이터베이스**: Supabase 클라이언트 설정
- **프로젝트 관리**: Sprint 1 계획 수립

### 🔄 진행 중인 작업
- **T-0001**: 반 이동 트랜잭션 API (1.5d 예상, 마감: 08-14)
- **T-0002**: 미정의 작업 (1.0d 예상, 마감: 08-12)

### ❌ 미완성 / 개선 필요
- **폴더 구조**: 현재 혼재된 구조를 최신 표준으로 정리
- **비즈니스 로직**: features/ 계층 부재
- **설정 관리**: config/ 중앙화 부재
- **테스트 코드**: 테스트 전략 및 구현 부재
- **문서화**: 개발 가이드 부족

---

## 🗺️ 통합 실행 로드맵

### 🏗️ **Phase 1: 구조 정리 및 기반 강화 (1-2주)**

#### 1.1 프로젝트 구조 현대화 ⭐ **최우선**
```bash
# 현재 → 목표 구조 변경
src/components/class-manager/ → src/components/classes/
src/components/student/ → src/components/students/
src/store/useClassStore.ts → src/store/classesStore.ts
src/store/useStudentStore.ts → src/store/studentsStore.ts
src/store/useColumnStore.ts → src/config/columns/ (고정값으로 이동)
src/utils/constants.ts → src/config/constants.ts
src/utils/validators.ts + src/lib/validations.ts → 통합
```

#### 1.2 Features 계층 신설
```typescript
src/features/
├── auth/           // 인증 관련 비즈니스 로직
│   ├── api.ts     // API 함수
│   ├── hooks.ts   // 커스텀 훅
│   └── service.ts // 비즈니스 로직
├── students/      // 학생 관리
├── classes/       // 클래스 관리
├── attendance/    // 출결 관리
├── instructors/   // 강사 관리
├── payments/      // 수납 관리
└── dnd/          // 드래그앤드롭 로직
```

#### 1.3 Config 중앙 집중화
```typescript
src/config/
├── constants.ts      // 전역 상수
├── menu.ts          // 네비게이션 메뉴
├── theme.ts         // 테마 설정
├── columns/         // 테이블 컬럼 정의
│   ├── studentsColumns.ts
│   ├── classesColumns.ts
│   └── instructorsColumns.ts
└── permissions.ts   // 권한 정의
```

### 🚀 **Phase 2: Sprint 1 완수 (현재 진행중)**

#### 2.1 T-0001: 반 이동 트랜잭션 API 완성
- **목표**: 학생 반 이동의 데이터 정합성 보장
- **구현사항**:
  - `POST /api/enrollments/move` 트랜잭션 API
  - `position_in_class` 자동 재정렬
  - 충돌 감지 및 재시도 로직
  - Optimistic UI + 실패시 롤백

#### 2.2 T-0002: 작업 내용 확인 필요
- Sprint 계획에서 미정의된 1.0d 작업 명확화 필요

#### 2.3 성능 및 안정성 목표 달성
- **10k rows 가상화**: react-window 최적화
- **50FPS 성능**: 드래그앤드롭 최적화
- **ErrorBoundary + Sentry**: 에러 추적 시스템

### 🏢 **Phase 3: 엔터프라이즈급 기능 구현 (3-4주)**

#### 3.1 RBAC (역할 기반 접근 제어)
```typescript
// 권한 시스템 구현
const ROLES = {
  ADMIN: { permissions: ['students:*', 'classes:*', 'settings:*'] },
  TEACHER: { permissions: ['students:read,update', 'classes:read'] },
  STAFF: { permissions: ['students:read,create', 'classes:read'] }
}

// PermissionGate 컴포넌트
<PermissionGate resource="students" action="delete">
  <DeleteButton />
</PermissionGate>
```

#### 3.2 상태 정합성 강화 (Immer 적용)
```typescript
// Zustand + Immer로 불변성 보장
const useStudentStore = create(
  produce((set, get) => ({
    moveStudent: async (studentId, targetClassId) => {
      // Optimistic update
      set((state) => {
        const student = state.students.find(s => s.id === studentId)
        if (student) student.class_id = targetClassId
      })
      
      try {
        await api.moveStudent(studentId, targetClassId)
      } catch (error) {
        // Rollback on failure
        set(originalState)
      }
    }
  }))
)
```

#### 3.3 에러 경계 및 피드백 시스템
- **ErrorBoundary**: React 에러 캐칭 + Sentry 연동
- **Toast 알림**: 성공/실패 즉시 피드백
- **로딩 상태**: 사용자 경험 개선

#### 3.4 접근성 및 모바일 최적화
- **키보드 네비게이션**: 드래그앤드롭 키보드 지원
- **시맨틱 마크업**: 스크린 리더 호환
- **터치 최적화**: 모바일 드래그앤드롭

### 📊 **Phase 4: 고급 기능 개발 (5-6주)**

#### 4.1 분석 대시보드
- **실시간 통계**: 학생 수, 수익, 출석률
- **다차원 분석**: 기간별, 클래스별, 학년별 필터링
- **시각화**: Recharts를 활용한 차트 대시보드

#### 4.2 강사 관리 시스템 완성
- 현재 60% 완료 상태를 100%로 완성
- 급여 체계 설정 및 자동 계산
- 자격증/경력 관리 시스템

#### 4.3 수강료 관리 시스템
- 다양한 결제 방식 지원
- 할인 정책 엔진
- 미납자 관리 및 알림 시스템

#### 4.4 학부모 소통 시스템
- 카카오톡 알림톡 연동
- 실시간 출입 알림
- 자동 학습 리포트 발송

### 🚀 **Phase 5: 완성도 향상 (7-8주)**

#### 5.1 PWA 모바일 앱
- Service Worker 구현
- 오프라인 동기화
- 푸시 알림 시스템

#### 5.2 AI 분석 기능
- 학습 성과 예측 모델
- 이탈 위험 조기 감지
- 맞춤형 상담 추천

#### 5.3 테스트 및 품질 보증
- **단위 테스트**: Jest + React Testing Library
- **통합 테스트**: API 및 상태 관리
- **E2E 테스트**: Cypress 시나리오 테스트

#### 5.4 문서화 완성
- **API 문서**: Swagger/OpenAPI
- **컴포넌트 문서**: Storybook
- **사용자 매뉴얼**: 학원 운영 가이드

---

## 📅 구체적 실행 일정

### Week 1-2: 구조 정리 + Sprint 1 완수
- **Day 1-3**: 폴더 구조 현대화
- **Day 4-7**: Features 계층 신설 및 비즈니스 로직 분리  
- **Day 8-10**: T-0001 트랜잭션 API 완성
- **Day 11-14**: T-0002 완료 + 성능 최적화

### Week 3-4: 엔터프라이즈급 기능
- **Day 15-18**: RBAC 시스템 구현
- **Day 19-21**: Immer 상태 관리 + 에러 경계
- **Day 22-25**: 접근성 개선 + 모바일 최적화
- **Day 26-28**: 통합 테스트 및 안정화

### Week 5-6: 고급 기능
- **Day 29-32**: 분석 대시보드 구현
- **Day 33-35**: 강사 관리 시스템 완성
- **Day 36-39**: 수강료 관리 시스템
- **Day 40-42**: 학부모 소통 시스템

### Week 7-8: 완성도 향상
- **Day 43-46**: PWA 모바일 앱
- **Day 47-49**: AI 분석 기능
- **Day 50-53**: 테스트 코드 작성
- **Day 54-56**: 문서화 및 배포 준비

---

## 🎯 성공 지표 및 검증 기준

### 기술적 지표
- **성능**: 10,000행 데이터 50FPS 유지
- **가용성**: 99.9% 업타임
- **응답시간**: 평균 200ms 이하
- **에러율**: 1% 이하

### 기능적 지표
- **RBAC**: 4단계 권한 시스템 (관리자/강사/직원/조회자)
- **DnD**: 트랜잭션 보장된 드래그앤드롭
- **실시간**: WebSocket 기반 실시간 업데이트
- **분석**: 10가지 이상 통계 지표

### 사용자 경험 지표
- **접근성**: WCAG 2.1 AA 준수
- **모바일**: 100% 반응형 지원
- **성능**: Core Web Vitals 우수 등급
- **오류**: 사용자 친화적 에러 메시지

---

## 🚨 위험 요소 및 대응 방안

### 기술적 위험
- **성능 저하**: 가상화 미구현 시 → react-window 필수 적용
- **상태 동기화**: 실시간 업데이트 충돌 → Immer + 낙관적 업데이트
- **브라우저 호환성**: 구버전 지원 → Polyfill 및 점진적 향상

### 일정 위험
- **Sprint 1 지연**: T-0002 미정의 → 즉시 작업 내용 명확화 필요
- **복잡성 증가**: 엔터프라이즈 기능 → 단계별 점진적 구현
- **테스트 부채**: 후반 품질 이슈 → 개발과 동시 테스트 작성

### 비즈니스 위험
- **사용자 피드백**: 실제 학원 테스트 부족 → MVP 조기 배포 및 피드백 수집
- **확장성**: 멀티 학원 지원 → 초기부터 tenant 구조 고려

---

## 💡 다음 행동 단계

### 즉시 실행 (오늘)
1. **T-0002 작업 내용 명확화**: Sprint 계획 구체화
2. **폴더 구조 정리 시작**: 최우선 순위로 진행
3. **T-0001 진행 상황 점검**: 마감일 08-14 준수

### 이번 주 (08-08 ~ 08-14)
1. **구조 현대화 완료**: src/ 폴더 재정리
2. **Features 계층 신설**: 비즈니스 로직 분리
3. **Sprint 1 목표 달성**: P0 기능 완성

### 다음 주 (08-15 ~ 08-21)
1. **엔터프라이즈 기능 시작**: RBAC 시스템 구현
2. **성능 최적화**: 10k rows 가상화 달성
3. **안정성 강화**: 에러 처리 및 피드백 시스템

---

**이 개발 플랜은 기존 문서들의 진화 과정을 반영하여 현재 상황에 최적화된 실행 가능한 로드맵입니다.**

**최종 업데이트**: 2025-08-08  
**다음 리뷰**: 2025-08-15 (Sprint 1 완료 후)